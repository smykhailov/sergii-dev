{"version":3,"file":"78cf9e97a78d5258dee8f1b68968558e687e8556-e17b29ac58857b95b0f0.js","mappings":"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","sources":["webpack://sergii-dev/./src/components/article-list-item.tsx","webpack://sergii-dev/./src/core/date.ts"],"sourcesContent":["import React, {\n  FC,\n  MouseEvent,\n  KeyboardEvent,\n  useEffect,\n  useState,\n  CSSProperties,\n  PropsWithChildren,\n} from \"react\";\nimport { Link, navigate } from \"gatsby\";\nimport styled from \"@emotion/styled\";\n\nimport slugify from \"slugify\";\nimport { formatDate } from \"@core/date\";\n\nconst ArticleListItem: FC<\n  PropsWithChildren<{\n    id: string;\n    slug: string;\n    title: string;\n    date: string;\n    timeToRead: string;\n    tags?: GatsbyTypes.Maybe<readonly GatsbyTypes.Maybe<string>[]>;\n    style?: CSSProperties;\n  }>\n> = props => {\n  const [commentsCount, setCommentsCount] = useState(0);\n\n  useEffect(() => {\n    let cancel = false;\n    const getCommentsCount = async () => {\n      const encodedSlug = encodeURIComponent(props.slug);\n      const url = `https://api.github.com/search/issues?q=%22Gitalk_${encodedSlug}%22+type:issue+in:body+label:Gitalk+repo:smykhailov%2Fsergii-dev&t=${Date.now()}`;\n\n      if (cancel) {\n        return;\n      }\n\n      const response = await fetch(url);\n      const data = await response.json();\n\n      if (cancel) {\n        return;\n      }\n\n      if (data?.items) {\n        setCommentsCount(data?.items[0]?.comments || 0);\n      }\n    };\n\n    getCommentsCount()\n      .then(() => console.debug(\"Comments count received\"))\n      .catch(err => console.error(\"Cannot get comments count\", err));\n\n    return () => {\n      cancel = true;\n    };\n  }, [props.slug]);\n\n  const onKeyDownHandler = (event: KeyboardEvent<HTMLDivElement>) => {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      navigate(props.slug);\n    }\n  };\n\n  return (\n    <div style={{ ...props.style, padding: \"6px 18px\" }}>\n      <ArticleItemContainer\n        key={props.id}\n        tabIndex={0}\n        onKeyDown={onKeyDownHandler}\n      >\n        <ItemButton to={props.slug}>\n          <ArticleItemHeader>\n            <h3>{props.title}</h3>\n          </ArticleItemHeader>\n          <ArticleItemBody>\n            {props.tags?.map(tag => (\n              <Link\n                key={tag}\n                to={`/tags/${slugify(tag as string).toLocaleLowerCase()}`}\n              >{`#${tag}`}</Link>\n            ))}\n          </ArticleItemBody>\n          <ArticleItemFooter>\n            <div>\n              <span>\n                {formatDate(props.date)} - <em>{props.timeToRead}</em>\n              </span>\n            </div>\n            <div>\n              <a href=\"/\">\n                {commentsCount === 1\n                  ? `${commentsCount} comment`\n                  : `${commentsCount} comments`}\n              </a>\n            </div>\n          </ArticleItemFooter>\n        </ItemButton>\n      </ArticleItemContainer>\n    </div>\n  );\n};\n\nconst ItemButton: FC<PropsWithChildren<{ to: string }>> = props => {\n  const onClickHandler = (event: MouseEvent<HTMLDivElement>) => {\n    event.preventDefault();\n    navigate(props.to);\n  };\n\n  return <div onClick={onClickHandler}>{props.children}</div>;\n};\n\nconst ArticleItemContainer = styled.div(props => ({\n  display: \"flex\",\n  flexDirection: \"column\",\n  margin: \"8px 0\",\n  padding: \"12px\",\n  backgroundColor: props.theme.colors.main.titleContainerBackgroundColor,\n\n  \":hover\": {\n    backgroundColor: props.theme.colors.main.backgroundHoverColor,\n    cursor: \"pointer\",\n  },\n}));\n\nconst ArticleItemHeader = styled.div(props => ({\n  display: \"flex\",\n\n  \"& h3\": {\n    margin: 0,\n    color: props.theme.colors.textColor,\n    opacity: 0.85,\n  },\n\n  \"& h3:hover\": {\n    opacity: 1,\n  },\n}));\n\nconst ArticleItemBody = styled.div({\n  display: \"flex\",\n  flexWrap: \"wrap\",\n  margin: \"12px 0\",\n\n  \"& a\": {\n    marginRight: 12,\n    opacity: 0.85,\n  },\n\n  \"& a:hover\": {\n    opacity: 1,\n  },\n});\n\nconst ArticleItemFooter = styled.div(props => ({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  fontSize: props.theme.fontSize,\n  color: props.theme.colors.textColor,\n}));\n\nexport default ArticleListItem;\n","export const formatDate: (date: Date | string) => string = (\n  date: Date | string\n) => {\n  const dateToFormat = date instanceof Date ? date : new Date(date);\n  const options: Intl.DateTimeFormatOptions = {\n    month: \"short\",\n    day: \"numeric\",\n  };\n\n  if (new Date().getFullYear() > dateToFormat.getFullYear()) {\n    options.year = \"numeric\";\n  }\n\n  return Intl.DateTimeFormat(\"en-US\", options).format(dateToFormat);\n};\n"],"names":["ItemButton","props","___EmotionJSX","onClick","event","preventDefault","navigate","to","children","ArticleItemContainer","_styled","target","display","flexDirection","margin","padding","backgroundColor","theme","colors","main","titleContainerBackgroundColor","backgroundHoverColor","cursor","ArticleItemHeader","color","textColor","opacity","ArticleItemBody","name","styles","ArticleItemFooter","justifyContent","fontSize","_props$tags","commentsCount","setCommentsCount","useState","useEffect","cancel","async","url","encodeURIComponent","slug","Date","now","response","fetch","data","json","_data$items$","items","comments","getCommentsCount","then","console","debug","catch","err","error","style","key","id","tabIndex","onKeyDown","title","tags","map","tag","Link","slugify","toLocaleLowerCase","formatDate","date","timeToRead","href","dateToFormat","options","month","day","getFullYear","year","Intl","DateTimeFormat","format"],"sourceRoot":""}